# Multi-Agent Configuration Example
# 多 LLM 并行工作配置示例

# 复制此文件为 config.yaml 并修改参数
# cp config.multi-agent.example.yaml config.yaml

environment: 'testnet'

# ============================================================================
# HYPERLIQUID CONFIGURATION
# ============================================================================
hyperliquid:
  mainnet_url: 'https://api.hyperliquid.xyz'
  testnet_url: 'https://api.hyperliquid-testnet.xyz'
  private_key: '${HYPERLIQUID_PRIVATE_KEY}'
  vault_address: null
  timeout: 10
  max_retries: 3
  retry_delay: 2
  max_position_size: 1.0
  max_leverage: 5
  max_daily_trades: 50

# ============================================================================
# LLM CONFIGURATION - 配置多个模型
# ============================================================================
llm:
  models:
    # DeepSeek (推荐，性价比最高)
    deepseek-chat:
      provider: 'official'
      official:
        base_url: 'https://api.deepseek.com/v1'
        api_key: '${DEEPSEEK_API_KEY}'
        model_name: 'deepseek-chat'
        timeout: 30
        pricing:
          input: '$0.27/1M tokens'
          output: '$1.10/1M tokens'

    # OpenAI GPT-4 (可选，贵但强大)
    gpt-4-turbo:
      provider: 'official'
      official:
        base_url: 'https://api.openai.com/v1'
        api_key: '${OPENAI_API_KEY}'
        model_name: 'gpt-4-turbo-preview'
        timeout: 30
        pricing:
          input: '$10.00/1M tokens'
          output: '$30.00/1M tokens'

    # Qwen (可选，性价比中等)
    qwen-plus:
      provider: 'official'
      official:
        base_url: 'https://dashscope-intl.aliyuncs.com/compatible-mode/v1'
        api_key: '${QWEN_API_KEY}'
        model_name: 'qwen-plus'
        timeout: 30
        pricing:
          input: '$0.50/1M tokens'
          output: '$2.00/1M tokens'

  max_tokens: 500
  temperature: 0.7

# ============================================================================
# TRADING CONFIGURATION
# ============================================================================
trading:
  interval_minutes: 3
  coins: ['BTC', 'ETH', 'SOL']
  kline_limit_3m: 30
  kline_limit_4h: 24
  max_position_per_agent: 0.5
  stop_loss_percentage: 5.0
  take_profit_percentage: 10.0

# ============================================================================
# AI AGENTS CONFIGURATION - 多 Agent 并行配置
# ============================================================================

# 方案 1: 同模型不同策略（推荐用于测试）
# 3个 DeepSeek Agent，不同的风险偏好
agents:
  # Agent 1: 激进型交易者
  - name: 'Aggressive Trader'
    enabled: true
    provider: 'deepseek'
    model: 'deepseek-chat'
    temperature: 0.9              # 高温度 = 更激进，更多变化
    max_tokens: 500
    description: 'High-risk high-reward aggressive trading strategy'
    strategy:
      risk_tolerance: 'high'
      preferred_leverage: 3
      stop_loss_pct: 3.0          # 更宽的止损
      take_profit_pct: 15.0       # 更高的盈利目标

  # Agent 2: 保守型交易者
  - name: 'Conservative Trader'
    enabled: true
    provider: 'deepseek'
    model: 'deepseek-chat'
    temperature: 0.3              # 低温度 = 更保守，更一致
    max_tokens: 500
    description: 'Low-risk conservative trading strategy'
    strategy:
      risk_tolerance: 'low'
      preferred_leverage: 2
      stop_loss_pct: 2.0          # 更紧的止损
      take_profit_pct: 5.0        # 更低的盈利目标（快速获利）

  # Agent 3: 平衡型交易者
  - name: 'Balanced Trader'
    enabled: true
    provider: 'deepseek'
    model: 'deepseek-chat'
    temperature: 0.6              # 中等温度
    max_tokens: 500
    description: 'Balanced risk-reward trading strategy'
    strategy:
      risk_tolerance: 'medium'
      preferred_leverage: 2
      stop_loss_pct: 4.0
      take_profit_pct: 8.0

# ============================================================================
# 方案 2: 多模型对比（需要多个 API Key，成本较高）
# ============================================================================
# 取消下面的注释来启用多模型配置
# agents:
#   # DeepSeek Agent
#   - name: 'DeepSeek Trader'
#     enabled: true
#     provider: 'deepseek'
#     model: 'deepseek-chat'
#     temperature: 0.7
#     max_tokens: 500
#     description: 'DeepSeek AI trading agent'
#
#   # OpenAI GPT-4 Agent
#   - name: 'GPT-4 Trader'
#     enabled: true
#     provider: 'openai'
#     model: 'gpt-4-turbo'
#     temperature: 0.7
#     max_tokens: 500
#     description: 'GPT-4 AI trading agent'
#
#   # Qwen Agent
#   - name: 'Qwen Trader'
#     enabled: true
#     provider: 'qwen'
#     model: 'qwen-plus'
#     temperature: 0.7
#     max_tokens: 500
#     description: 'Qwen AI trading agent'

# ============================================================================
# 方案 3: 混合策略（2便宜 + 1贵）
# ============================================================================
# agents:
#   # 快速决策（便宜模型）
#   - name: 'DeepSeek Fast'
#     enabled: true
#     provider: 'deepseek'
#     model: 'deepseek-chat'
#     temperature: 0.7
#     max_tokens: 300              # 更少 tokens = 更快更便宜
#
#   - name: 'Qwen Fast'
#     enabled: true
#     provider: 'qwen'
#     model: 'qwen-plus'
#     temperature: 0.7
#     max_tokens: 300
#
#   # 深度分析（强力模型，仅在需要时启用）
#   - name: 'GPT-4 Advisor'
#     enabled: false               # 默认关闭，需要时手动启用
#     provider: 'openai'
#     model: 'gpt-4-turbo'
#     temperature: 0.5
#     max_tokens: 1000             # 更详细的分析

# ============================================================================
# MULTI-AGENT EXECUTION STRATEGY
# 多 Agent 执行策略
# ============================================================================
multi_agent:
  # 决策执行模式
  execution_mode: 'majority_vote'
  # 可选值:
  #   'majority_vote'      - 多数投票（推荐）
  #   'confidence_weight'  - 置信度加权
  #   'best_performer'     - 只执行历史表现最好的
  #   'conservative'       - 只有全部同意才执行
  #   'all_parallel'       - 每个 Agent 独立执行（需要多个钱包）

  # 最低置信度阈值（低于此值不执行）
  min_confidence: 0.6

  # 多数投票需要的最低比例
  majority_threshold: 0.5        # 50% 以上同意才执行

  # 是否记录所有 Agent 的决策（用于性能分析）
  log_all_decisions: true

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
database:
  url: 'postgresql://${DB_USER}:${DB_PASSWORD}@localhost:5432/trading_bot'
  pool_size: 10
  max_overflow: 20
  pool_timeout: 30
  pool_recycle: 3600

# ============================================================================
# MONITORING & ALERTS
# ============================================================================
monitoring:
  performance:
    enabled: true
    track_cycle_time: true
    track_api_latency: true
    track_agent_performance: true   # 跟踪每个 Agent 的表现

  account:
    enabled: true
    check_balance: true
    check_liquidation_risk: true
    min_balance_alert: 100.0

  alerts:
    console: true
    log_file: true
    telegram:
      enabled: false
      bot_token: '${TELEGRAM_BOT_TOKEN}'
      chat_id: '${TELEGRAM_CHAT_ID}'

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
logging:
  level: 'INFO'
  log_dir: 'logs'
  main_log: 'logs/trading_bot.log'
  error_log: 'logs/trading_bot_error.log'

  # Multi-agent 专用日志
  agent_decisions_log: 'logs/agent_decisions.log'  # 记录所有决策
  agent_performance_log: 'logs/agent_performance.log'  # 记录性能对比

  rotation: '1 day'
  retention: '30 days'
  compression: 'zip'
  json_format: false
  colorize_console: true

# ============================================================================
# ENVIRONMENT-SPECIFIC OVERRIDES
# ============================================================================
environments:
  testnet:
    dry_run:
      enabled: false
    hyperliquid:
      active_url: 'testnet_url'
    logging:
      level: 'INFO'

  mainnet:
    dry_run:
      enabled: false
    hyperliquid:
      active_url: 'mainnet_url'
    logging:
      level: 'WARNING'
    safety_confirmations: true
    require_manual_approval: true

# ============================================================================
# 成本估算（基于方案 1: 3个 DeepSeek Agent）
# ============================================================================
#
# 每个周期:
#   - 3个 Agent × 500 tokens = 1500 tokens
#   - 成本: $0.27/1M × 1500 = $0.000405
#
# 每天 (480 个周期):
#   - 1500 × 480 = 720K tokens
#   - 成本: $0.27/1M × 720K = $0.1944
#
# 每月:
#   - 720K × 30 = 21.6M tokens
#   - 成本: $0.27/1M × 21.6M = $5.83
#
# 年成本: ~$70
# ============================================================================
